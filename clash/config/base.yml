##### anchor area START #####
x-misc:
  regex-include-info-node: &x-regex-include-info-node
    '(?i)^ℹ️ .+: \d.+ (KB|MB|GB|TB) \/ \d.+ (KB|MB|GB|TB).*$'
  regex-exclude-info-node: &x-regex-exclude-info-node
    '(?i)^(?!ℹ️ .+: \d.+ (KB|MB|GB|TB) \/ \d.+ (KB|MB|GB|TB)).*$'
  regex-exclude-special-node: &x-regex-exclude-special-node
    '(?i)^(?!.*(?:专用|noauto)).*$'

x-dns:
  system: &x-dns-system
    - system
  china: &x-dns-china
    - 119.29.29.29
    - 223.5.5.5
  overseas: &x-dns-overseas
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query

x-proxy-providers: &x-proxy-providers
  type: http
  interval: 3600
  health-check:
    enable: true
    url: https://cp.cloudflare.com
    interval: 300

x-proxy-groups:
  control-select-proxy: &x-pg-control-select-proxy
    type: select
    proxies:
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择
      - 🎩 私有节点
      - 🏠 家宽节点
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选
      # - 🇮🇳 印度优选
      # - 🇬🇧 英国优选
      # - 🇫🇷 法国优选
      # - 🇨🇦 加拿大优选
      # - 🇦🇺 澳大利亚优选
      # - 🇷🇺 俄罗斯优选
      # - 🇹🇷 土耳其优选
      # - 🇦🇷 阿根廷优选
      # - 🇧🇷 巴西优选
      # - 🇨🇳 回国选择
  control-select-direct: &x-pg-control-select-direct
    type: select
    proxies:
      - 🎯 全部直连
      - 🔰 节点选择
      - ✈️ 手动选择
      - 🎩 私有节点
      - 🏠 家宽节点
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选
      # - 🇮🇳 印度优选
      # - 🇬🇧 英国优选
      # - 🇫🇷 法国优选
      # - 🇨🇦 加拿大优选
      # - 🇦🇺 澳大利亚优选
      # - 🇷🇺 俄罗斯优选
      # - 🇹🇷 土耳其优选
      # - 🇦🇷 阿根廷优选
      # - 🇧🇷 巴西优选
      # - 🇨🇳 回国选择
  control-select-private: &x-pg-control-select-private
    type: select
    proxies:
      - 🎩 私有节点
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择
      - 🏠 家宽节点
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选
      # - 🇮🇳 印度优选
      # - 🇬🇧 英国优选
      # - 🇫🇷 法国优选
      # - 🇨🇦 加拿大优选
      # - 🇦🇺 澳大利亚优选
      # - 🇷🇺 俄罗斯优选
      # - 🇹🇷 土耳其优选
      # - 🇦🇷 阿根廷优选
      # - 🇧🇷 巴西优选
      # - 🇨🇳 回国选择
  control-select-clean: &x-pg-control-select-clean
    type: select
    proxies:
      - 🏠 家宽节点
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择
      - 🎩 私有节点
      - 📥 高耗流量
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选
      # - 🇮🇳 印度优选
      # - 🇬🇧 英国优选
      # - 🇫🇷 法国优选
      # - 🇨🇦 加拿大优选
      # - 🇦🇺 澳大利亚优选
      # - 🇷🇺 俄罗斯优选
      # - 🇹🇷 土耳其优选
      # - 🇦🇷 阿根廷优选
      # - 🇧🇷 巴西优选
      # - 🇨🇳 回国选择
  control-select-all: &x-pg-control-select-all
    type: select
    include-all: true
    filter: *x-regex-exclude-info-node
  region-urltest: &x-pg-region-urltest
    type: url-test
    url: "https://www.gstatic.com/generate_204"
    interval: 300
    lazy: true
    include-all: true
    filter: *x-regex-exclude-special-node
    # hidden: true
  region-select: &x-pg-region-select
    type: select
    include-all: true
    filter: *x-regex-exclude-special-node
    # hidden: true

x-rule-providers:
  yaml: &x-rp-yaml
    type: http
    format: yaml
    interval: 86400
  text: &x-rp-text
    type: http
    format: text
    interval: 86400
  mrs: &x-rp-mrs
    type: http
    format: mrs
    interval: 86400
##### anchor area END #####


##### config area START #####
# general
mixed-port: 7890
ipv6: false
allow-lan: true
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true
# meta general
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome

## meta sniffer (for redir-host)
# sniffer:
#   enable: true
#   sniff:
#     HTTP:
#       ports: [80, 8080-8880]
#       override-destination: true
#     TLS:
#       ports: [443, 8443]
#     QUIC:
#       ports: [443, 8443]
#   force-domain:
#     - "+.netflix.com"
#     - "+.nflxvideo.net"
#     - "+.amazonaws.com"
#     - "+.media.dssott.com"
#   skip-domain:
#     - '+.apple.com'
#     - Mijia Cloud
#     - dlg.io.mi.com
#     - +.oray.com
#     - +.sunlogin.net
#     - +.push.apple.com

# network stack
dns: &base-dns
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "+.stun.*.*.*.*.*"
    - "rule-set:ConnectivityCheck"
    - "rule-set:Private_domain"
    - "rule-set:MyDirect,MyDirect02"
    - "rule-set:TailscaleDERP,Tailscale_domain"
    - "rule-set:Tracker,PT"
    - "rule-set:Games"
    - "rule-set:GoogleVoice"
    - "rule-set:Speedtest"
    - "rule-set:China_domain"
  nameserver: *x-dns-overseas
  nameserver-policy:
    "rule-set:Private_domain": *x-dns-system
    "rule-set:MyDirect,MyDirect02": *x-dns-system
    "rule-set:TailscaleDERP,Tailscale_domain": *x-dns-china
    "rule-set:Tracker,PT": *x-dns-china
    "rule-set:GamesDownload,GamesDirect": *x-dns-system
    "rule-set:DeveloperDirect": *x-dns-system
    "rule-set:MicrosoftDirect": *x-dns-system
    "rule-set:China_domain": *x-dns-system
tun:
  enable: true
  stack: mixed
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - "tcp://any:53"

# proxies
proxy-groups: &base-proxy-groups
  ## control groups
  - name: ℹ️ 订阅信息
    <<: *x-pg-control-select-all
    filter: *x-regex-include-info-node
  - name: 🔰 节点选择
    type: select
    proxies:
      - ✈️ 手动选择
      - 🎯 全部直连
      - 🎩 私有节点
      - 🏠 家宽节点
      - 🇭🇰 香港优选
      - 🇺🇸 美国优选
      - 🇯🇵 日本优选
      - 🇹🇼 台湾优选
      - 🇸🇬 新加坡优选
      - 🇰🇷 韩国优选
      # - 🇮🇳 印度优选
      # - 🇬🇧 英国优选
      # - 🇫🇷 法国优选
      # - 🇨🇦 加拿大优选
      # - 🇦🇺 澳大利亚优选
      # - 🇷🇺 俄罗斯优选
      # - 🇹🇷 土耳其优选
      # - 🇦🇷 阿根廷优选
      # - 🇧🇷 巴西优选
      # - 🇨🇳 回国选择

  - name: ✈️ 手动选择
    <<: *x-pg-control-select-all

  - name: 🎩 私有节点
    <<: *x-pg-control-select-all
    filter: "(?i:Private|PRIV)"

  - name: 🏠 家宽节点
    <<: *x-pg-control-select-all
    filter: "(?i:家宽|Clean)"

  - name: 📥 高耗流量
    <<: *x-pg-control-select-all
    proxies:
      - 🔰 节点选择
      - 🎯 全部直连
      - ✈️ 手动选择
      - 🎩 私有节点
      - 🏠 家宽节点

  - name: 📶 Speedtest
    <<: *x-pg-control-select-all
    proxies:
      - 🎯 全部直连
      - 🔰 节点选择
      - ✈️ 手动选择
      - 🎩 私有节点
      - 🏠 家宽节点
      - 📥 高耗流量

  - name: 🐟 漏网之鱼
    <<: *x-pg-control-select-proxy

  - name: 🎯 全部直连
    type: select
    hidden: true
    proxies:
      - DIRECT

  - name: 🛑 Block
    type: select
    hidden: true
    proxies:
      - REJECT

  ## services groups
  - name: 🍎 Apple
    <<: *x-pg-control-select-direct

  - name: 🍭 Google
    <<: *x-pg-control-select-proxy

  - name: Ⓜ️ Microsoft
    <<: *x-pg-control-select-proxy

  - name: ☁️ Onedrive
    <<: *x-pg-control-select-direct

  - name: 💻 Developer
    <<: *x-pg-control-select-proxy

  - name: ✨ GenAI
    <<: *x-pg-control-select-proxy

  - name: 🎮 Games
    <<: *x-pg-control-select-direct

  - name: 🎮 Nintendo
    <<: *x-pg-control-select-direct

  - name: 🎵 Spotify
    <<: *x-pg-control-select-proxy

  - name: 🎵 Qobuz
    <<: *x-pg-control-select-proxy

  - name: 🎥 Emby Providers
    <<: *x-pg-control-select-all
    filter: "(?i:Emby)"

  - name: 🎥 Youtube
    <<: *x-pg-control-select-proxy

  - name: 🎥 Netflix
    <<: *x-pg-control-select-proxy

  - name: 🎥 Apple TV
    <<: *x-pg-control-select-proxy

  - name: 🎥 TikTok
    <<: *x-pg-control-select-proxy

  - name: 💰 Crypto
    <<: *x-pg-control-select-proxy

  - name: 💰 Banking@HK
    <<: *x-pg-control-select-direct

  - name: 💬 Telegram
    <<: *x-pg-control-select-proxy

  - name: 𝕏 Twitter
    <<: *x-pg-control-select-proxy

  - name: 🈲 Restricted
    <<: *x-pg-control-select-private

  ## region groups
  - name: 🇭🇰 香港优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇭🇰|\bHK[G]?\b|Hong.*?Kong|\bHKT\b|\bHKBN\b|\bHGC\b|\bWTT\b|\bCMI\b|[^-]港)'

  - name: 🇺🇸 美国优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇺🇸|\bUS[A]?\b|America|United.*?States|美国|[^-]美|波特兰|达拉斯|俄勒冈|凤凰城|费利蒙|硅谷|拉斯维加斯|洛杉矶|圣何塞|圣克拉拉|西雅图|芝加哥)'

  - name: 🇯🇵 日本优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇯🇵|\bJP[N]?\b|Japan|Tokyo|Osaka|Saitama|日本|东京|大阪|埼玉|[^-尼]日)'

  - name: 🇹🇼 台湾优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇹🇼|\bTW[N]?\b|Taiwan|新北|彰化|\bCHT\b|台湾|[^-]台|\bHINET\b)'

  - name: 🇸🇬 新加坡优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇸🇬|\bSG[P]?\b|Singapore|新加坡|狮城)'

  - name: 🇰🇷 韩国优选
    <<: *x-pg-region-urltest
    filter: '(?i:🇰🇷|\bK[O]?R\b|Korea|首尔|韩|韓)'

  # - name: 🇮🇳 印度优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇮🇳|\bIN[D]?\b|India|Mumbai|印度|孟买|加尔各答|贾坎德|泰米尔纳德)'

  # - name: 🇬🇧 英国优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇬🇧|\bUK\b|England|United.*?Kingdom|London|英国|[^-]英|伦敦)'

  # - name: 🇫🇷 法国优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇫🇷|\bFR[A]?\b|France|Paris|法国|巴黎)'

  # - name: 🇨🇦 加拿大优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇨🇦|\bCA[N]?\b|Canada|Toronto|Montreal|Vancouver|加拿大|蒙特利尔|温哥华|楓葉|枫叶)'

  # - name: 🇦🇺 澳大利亚优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇦🇺|\bAU[S]?\b|Australia|Sydney|澳大利亚|澳洲|悉尼)'

  # - name: 🇷🇺 俄罗斯优选
  #   <<: *x-pg-region-urltest
  #   filter: '(?i:🇷🇺|\bRU[S]?\b|Russia|Moscow|Petersburg|Siberia|伯力|莫斯科|圣彼得堡|西伯利亚|新西伯利亚|哈巴罗夫斯克|俄罗斯|[^-]俄)'

  # - name: 🇹🇷 土耳其优选
  #   <<: *x-pg-region-urltest
  #   filter: "(?i:🇹🇷|Turkey|土耳其|伊斯坦布尔)"

  # - name: 🇦🇷 阿根廷优选
  #   <<: *x-pg-region-urltest
  #   filter: "(?i:🇦🇷|Argentina|阿根廷)"

  # - name: 🇧🇷 巴西优选
  #   <<: *x-pg-region-urltest
  #   filter: "(?i:🇧🇷|Brazil|巴西|Paulo|圣保罗|里约热内卢)"

  # - name: 🇨🇳 回国选择
  #   <<: *x-pg-control-select-all
  #   filter: '(?i:\bC[H]?N\b|China|回国|中国[^-]|江苏[^-]|北京[^-]|上海[^-]|广州[^-]|深圳[^-]|杭州[^-]|常州[^-]|徐州[^-]|青岛[^-]|宁波[^-]|镇江[^-]|成都[^-]|back)'

rule-providers: &base-rule-providers
  # 1. lan
  Private_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/private.mrs
  Private_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/private.mrs
  # 2. block
  AdobeTelemetry:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/ignaciocastro/a-dove-is-dumb@main/pihole.txt
  # 3. custom override
  MyDirect:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/MyDirect.list
  MyDirect02:
    # TODO: switch to domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/myCN.list
  MyProxy:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/MyProxy.list
  MyProxy02:
    # TODO: switch to domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/foreign.list
  # 4. main: p1
  TailscaleDERP:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/TailscaleDERP_domain.list
  Tailscale_domain:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/Tailscale_domain.list
  Tailscale_ip:
    <<: *x-rp-text
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/Tailscale_ip.list
  Tracker:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/tracker.mrs
  PT:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-pt.mrs
  Speedtest:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-speedtest.mrs
  ProxyHighBandwidth:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/ProxyHighBandwidth.list
  # 5. main: p2
  Bing:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/bing.mrs
  OneDrive:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/onedrive.mrs
  GoogleVoice:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/GoogleVoice.list
  Telegram_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.mrs
  Telegram_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/telegram.mrs
  Twitter_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/twitter.mrs
  Twitter_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/twitter.mrs
  Nintendo:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/nintendo.mrs
  YouTube:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.mrs
  Netflix_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/netflix.mrs
  Netflix_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/netflix.mrs
  AppleTV:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/apple-tvplus.mrs
  Bahamut:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/bahamut.mrs
  TikTok:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/tiktok.mrs
  Emby:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-emby.mrs
  Spotify:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/spotify.mrs
  Qobuz:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/Qobuz.list
  # 6. main: p3
  RestrictedZones:
    # TODO: switch to domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/list/fallback.list
  GamesDownload:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-game-platforms-download.mrs
  GamesDirect:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games@cn.mrs
  GamesOverseas:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games-!cn.mrs
  DeveloperDirect:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-dev@cn.mrs
  DeveloperOverseas:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-dev.mrs
  GenAIOverseas:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai-!cn.mrs
  GenAIOverseasExtra:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/GenAIExtra.list
  Crypto:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-cryptocurrency.mrs
  CryptoExtra:
    <<: *x-rp-text
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/jimlee2048/atc-config@main/clash/rules/CryptoExtra.list
  HongKongBank:
    # TODO: switch to domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/gz4zzxc/rule@main/Clash/rule/HongKongBank.list
  # 7. main: p4
  MicrosoftDirect:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft@cn.mrs
  Microsoft:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft.mrs
  Google_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.mrs
  Google_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/google.mrs
  AppleProxy:
    # TODO: switch to mrs + domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AppleProxy/AppleProxy.list
  Apple:
    # TODO: switch to mrs + domain behavior
    <<: *x-rp-text
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.list
  China_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/cn.mrs
  Overseas_domain:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/geolocation-!cn.mrs
  China_ip:
    <<: *x-rp-mrs
    behavior: ipcidr
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geoip/cn.mrs
  # ex1. dns policy assists
  ConnectivityCheck:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/connectivity-check.mrs
  Games:
    <<: *x-rp-mrs
    behavior: domain
    url: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-games.mrs

rules: &base-rules
  # domain > classical > ipcidr
  # 1. local
  - RULE-SET,Private_domain,🎯 全部直连
  - RULE-SET,Private_ip,🎯 全部直连,no-resolve
  # 2. block
  - RULE-SET,AdobeTelemetry,🛑 Block
  # 3. custom override
  - RULE-SET,MyDirect,🎯 全部直连
  - RULE-SET,MyDirect02,🎯 全部直连
  - RULE-SET,MyProxy,🔰 节点选择
  - RULE-SET,MyProxy02,🔰 节点选择
  # 4. main: p1
  - RULE-SET,TailscaleDERP,🎯 全部直连
  - RULE-SET,Tailscale_domain,🎯 全部直连
  - RULE-SET,Tailscale_ip,🎯 全部直连,no-resolve
  - RULE-SET,Tracker,🎯 全部直连
  - RULE-SET,PT,🎯 全部直连
  - RULE-SET,Speedtest,📶 Speedtest
  - RULE-SET,ProxyHighBandwidth,📥 高耗流量
  - RULE-SET,GamesDownload,🎯 全部直连
  - RULE-SET,GamesDirect,🎯 全部直连
  - RULE-SET,DeveloperDirect,🎯 全部直连
  - RULE-SET,MicrosoftDirect,🎯 全部直连
  # 5. main: p2
  - RULE-SET,Bing,🇺🇸 美国优选
  - RULE-SET,OneDrive,☁️ Onedrive
  - RULE-SET,GoogleVoice,🇺🇸 美国优选
  - RULE-SET,Telegram_domain,💬 Telegram
  - RULE-SET,Telegram_ip,💬 Telegram,no-resolve
  - RULE-SET,Twitter_domain,𝕏 Twitter
  - RULE-SET,Twitter_ip,𝕏 Twitter,no-resolve
  - RULE-SET,Nintendo,🎮 Nintendo
  - RULE-SET,YouTube,🎥 Youtube
  - RULE-SET,Netflix_domain,🎥 Netflix
  - RULE-SET,Netflix_ip,🎥 Netflix,no-resolve
  - RULE-SET,AppleTV,🎥 Apple TV
  - RULE-SET,Bahamut,🇹🇼 台湾优选
  - RULE-SET,TikTok,🎥 TikTok
  - RULE-SET,Emby,🎥 Emby Providers
  - RULE-SET,Spotify,🎵 Spotify
  - RULE-SET,Qobuz,🎵 Qobuz
  # 6. main: p3
  - RULE-SET,RestrictedZones,🈲 Restricted
  - RULE-SET,GamesOverseas,🎮 Games
  - RULE-SET,DeveloperOverseas,💻 Developer
  - RULE-SET,GenAIOverseas,✨ GenAI
  - RULE-SET,GenAIOverseasExtra,✨ GenAI
  - RULE-SET,Crypto,💰 Crypto
  - RULE-SET,CryptoExtra,💰 Crypto
  - RULE-SET,HongKongBank,💰 Banking@HK,no-resolve
  # 7. main: p4
  - RULE-SET,Microsoft,Ⓜ️ Microsoft
  - RULE-SET,Google_domain,🍭 Google
  - RULE-SET,Google_ip,🍭 Google,no-resolve
  - RULE-SET,AppleProxy,🔰 节点选择
  - RULE-SET,Apple,🍎 Apple
  # 8. final
  - RULE-SET,China_domain,🎯 全部直连
  - RULE-SET,Overseas_domain,🔰 节点选择
  - RULE-SET,China_ip,🎯 全部直连,no-resolve
  - MATCH,🐟 漏网之鱼

###### config area END #####